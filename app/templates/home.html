{% extends 'base.html' %}

{% block body %}
<div class="justify-content-center container-fluid">
  <div class="col-12 justify-content-center mx-auto banner">

    <div class="mt-4 justify-content-center row" style="flex-wrap: wrap;">

      <!-- Main Panel -->
      <div class="col-md-10 col-lg-5 col-sm-10 m-2 custom-col">
        <div class="row justify-content-center mt-4 mb-4">
          <div class="text-center col-lg-12 mt-5">

            <img class="p-0 m-0" style="width: 150px" src="{{ url_for('static', filename='img/d2h2logo.png') }}"
              alt="D2H2 logo" />
          </div>
        </div>

        <div class="row justify-content-center m-2 mt-5 text-center">
          <h5 style="font-weight: 450 !important;">Diabetes Data and Hypothesis Hub (D2H2)</h5>
          <h5> A platform that facilitates data-driven hypothesis generation for the diabetes and related metabolic
            disorder research community. </h5>
        </div>

        <div class="justify-content-center row ml-1 mr-1 text-center mt-5 text-center">
          <p style="font-size: 17px;"> Curated datasets containing gene expression in various Type 2 Diabetes
            transcriptomics signatures can be <a href="{{ url_for('downloads') }}">downloaded</a>, <a
              href="#visualize">visualized </a>, and <a href="#enrichranalysis">used for enrichment analysis</a>.</p>
        </div>

      </div>

      <div class="col-lg-5 col-md-10 col-sm-10 custom-col m-2" id="visualize">

        <div class="question mt-3 justify-content-center row p-2 text-center">
          <h4>Query a Single Gene across Curated Diabetes-Related Signatures</h4>
        </div>
        <div class="mt-3 justify-content-center row mb-3">
          <label class="mt-3 mr-1 ml-4" for="gene-select"> Enter gene symbol: </label>
          <select id="gene-select" class="mt-2" data-url-genes="{{ url_for('genes_api', geo_accession='human') }}"
            style="width: 200px;"></select>
        </div>
        <div class="row text-center justify-content-center">
          <p> Try an example: <a onclick="fillSingleExampleHome('STAT3')" style="color:rgb(10, 13, 149);">STAT3</a>,
            <a onclick="fillSingleExampleHome('AKT1')" style="color:rgb(10, 13, 149);">AKT1</a>
          </p>
        </div>
        <div class="row justify-content-center">
          <!-- 
          <button class="species-tab btn btn-primary m-1" id="human" role="tab">Human </button>
          <button class="species-tab btn btn-inactive m-1" id="mouse" role="tab">Mouse </button> -->
          <label class="mt-2 mr-1" for="species-toggle">Select species: </label>
          <label class="toggle" id="species-toggle">
            <input type="checkbox" id="species-val">
            <span class="slider"></span>
            <span class="labels" data-on="Mouse" data-off="Human"></span>
          </label>
        </div>


        <div class="justify-content-center row ml-1 mr-1 text-center">
          <p class="mt-3">This module provides a volcano plot visualization of the expression levels of a given gene in
            various Type 2 Diabetes transcriptomics signatures. Users may enter in a single gene symbol as input; the
            output is a volcano plot which plots each T2D signature by gene-specific p-value (y-axis) and fold change
            (x-axis) as well as the corresponding tables available for download.</p>
        </div>



        <div class="row justify-content-center mb-2">
          <img src="static/img/t2d-thumbnail.png" alt="" class="img-fluid img-thumbnail">
        </div>

        <div class="justify-content-center row text-center mb-2" style="bottom: 0;"">
          <a id="appyter-home"><button type="button" class="btn btn-primary btn-group-sm mt-3 mb-3">
            <span id="appyter-action">Generate plot</span>
          </button>
          </a>
        </div>
        <div id="volcano-loading""></div>
      </div>
    </div>

    <div class="container justify-content-center">

      <div id="volcano-plot" class="justify-content-center centered"></div>
      <div id="buttons"></div>
      <div id="t2d-tables"></div>
    </div>
    




    <div class=" row justify-content-center mb-2" style="flex-wrap: wrap;">

          <div class="col-lg-4 col-md-10 col-sm-10 custom-col p-3 m-2 justify-content-center col-sm-8">
          <div class="mb-2">
            <div class="justify-content-center row ml-1 mr-1 text-left mt-1">
              <h5 style="font-weight: 400 !important;"></h5>
            </div>
            <div class="justify-content-center row ml-1 mr-1 mt-2 mb-2" style="flex-wrap: wrap;">
              <div class="col">
                <h5 class="question text-center">Single Gene Queries</h5>
                <ul class="query-list">
                  <li>
                    <a class="queries" href="{{ url_for('singlegene_home') }}#tissue-cell-expression">
                      In what cells and tissues is my gene expressed?<br>
                    </a>
                  </li>
                  <li>
                    <a class="queries" href="{{ url_for('singlegene_home') }}#perturbations-conditions">
                      Under what conditions or perturbations is my gene regulated?<br>
                    </a>
                  </li>
                  <li>
                    <a class="queries" href="{{ url_for('singlegene_home') }}#gene-transcription-factors">
                      What are the transcription factors that regulate my gene?<br>
                    </a>
                  </li>
                  <li>
                    <a class="queries" href="{{ url_for('singlegene_home') }}#gwas-traits">
                      Is my gene associated with traits in human GWAS?<br>
                    </a>
                  </li>
                  <li>
                    <a class="queries" href="{{ url_for('singlegene_home') }}#gene-correlations">
                      Is my gene correlated with other genes?<br>
                    </a>
                  </li>
                  <li>
                    <a class="queries" href="{{ url_for('singlegene_home') }}#gene-phenotypes">
                      Is there a knockout mouse for my gene and does it show any phenotypes?
                    </a>
                  </li>
                </ul>
              </div>
              <div class="col">
                <h5 class="question text-center">Gene Set Queries</h5>
                <ul class="query-list">
                  <li>
                    <a class="queries" href="{{ url_for('geneset_home') }}#geneset-enrichr">
                      In which annotated gene sets is my gene set enriched?<br>
                    </a>
                  </li>
                  <li>
                    <a class="queries" href="{{ url_for('geneset_home') }}#geneset-kea3-chea3">
                      What transcription factors and kinases regulate my gene set?<br>
                    </a>
                  </li>
                  <li>
                    <a class="queries" href="{{ url_for('geneset_home') }}#geneset-sigcomlincs">
                      What are the LINCS L1000 small molecules and genetic perturbations that likely up- or
                      down-regulate the expression of my gene set?
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>


        <div class="col-lg-6 col-md-10 col-sm-10 custom-col m-2" id="enrichranalysis">

          <div class="question mt-3 p-2 justify-content-center row">
            <h4>Query a Gene Set across Curated Diabetes-Related Signatures</h4>
          </div>

          <div class="row mt-4 justify-content-center" style="flex-wrap: wrap;">
            <div class="col-md-5 col-sm-7 col-lg-4 text-center mr-3 mt-4">
              <textarea name="list" rows="8" id="text-area1"
                placeholder="Paste a set of valid Entrez gene symbols (e.g. STAT3) on each row in the text-box"
                onkeyup="geneCount($(this).val(), 1)" onchange="geneCount($(this).val(), 1)"
                onfocus="geneCount($(this).val(), 1)"></textarea>
              <div class="mt-1">
                <span id="gene-count1"> 0 </span> gene(s) entered
              </div>
              <div class="text-center">
                <a id="examplefill1" style="color: rgb(10, 13, 149)">Try an example gene set</a>
              </div>

            </div>
            <div class="col-md-5 col-sm-7 col-lg-4 text-center mr-3" style="overflow-y: visible !important;">
              <p>
                File formats accepted: csv, tsv, txt file with Entrez gene symbols on each line
              </p>
              <form action="/action_page.php" style="flex-wrap: wrap;">
                <input type="file" id="gene-file1" name="filename">
              </form>
              <label class="mt-1 mr-1" for="desc1">Enter gene set description (optional): </label>
              <input class="form-control-md" id="desc1" type="text">
              <p class="mt-2">Perform enrichement analysis through Enricher with the entered or uploaded gene set agasint our curated
                Diabetes gene set library.
                Any overlapping gene can be submitted to the <a href="{{ url_for('singlegene_home')}}">Single Gene
                  Queries</a> page and the sets of overlapping genes can be submitted to the <a
                  href="{{ url_for('geneset_home') }}">Gene Set Queries page.</p>
            </div>
            <div class="flex-column justify-content-center text-center m-2" style="overflow-y: visible !important;">
              
              </div>
          </div>


          <div class="row text-center justify-content-center m-2 mb-0">
            
          </div>


          <div class="justify-content-center row text-center mt-1">
            <a id="diabetesEnrichr-query">
              <button type="button" class="btn btn-primary btn-group-sm mt-3 mb-3"> Submit to Enrichr
                <img src="/static/img/enrichrlogo.png" class="img-fluid mr-3" style="width: 45px" alt="Enrichr">
              </button>
            </a>
          </div>


        </div>
      </div>

      <div class="container justify-content-center">
        <div id="enrich-res"></div>
      </div>
      <!-- Twitter Table -->
      <div class="row text-center justify-content-center" style="flex-wrap: wrap;">

        

        <div class="col-md-10 col-sm-10 col-lg-7 text-center custom-col mb-4 mr-2 ml-2">
          <div class="question p-2 justify-content-center row">
            <h4 class="mt-4">Recent Diabetes and Related Metabolic Disorder Publications Containing a Gene-Centric Title</h4>
          </div>
          <div id="tweets-res" class="mb-2 mt-1"></div>
        </div>

        <div class="col-md-6 col-sm-7 col-lg-3 text-center custom-col mb-4 mr-2 ml-2">
          <a class="twitter-timeline" data-width="1500" data-height="450" data-chrome="nofooter noborders transparent" href="https://twitter.com/D2H2Bot?ref_src=twsrc%5Etfw">Tweets by D2H2Bot</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        </div>
        
      </div>

    </div>




    {% endblock %}
  </div>
</div>

{% block footer %}
<script>
  createTweetsTable()
</script>
{% endblock %}